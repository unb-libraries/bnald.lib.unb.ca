id: source_documents
label: 'Source Documents Taxonomy Terms to Source Document Entities'
migration_group: bnald
migration_tags:
  - Drupal 7
source:
  plugin: d7_taxonomy_term
  key: migrate
  bundle: source_documents
process:
  title: name
  langcode:
    plugin: default_value
    default_value: 'und'
  year:
    -
      plugin: extract
      source: field_date_printed
      index:
        - 0
        - value
      default: '0000'
    -
      plugin: substr
      length: 4
  province:
    plugin: migration_lookup
    migration: provinces
    source: field_province
    no_stub: true
  printer:
    plugin: migration_lookup
    migration: printers
    source: field_printer
    no_stub: true
  print_location:
    plugin: migration_lookup
    migration: regions
    source: field_location_printed
    no_stub: true
  user_id:
    plugin: default_value
    default_value: 1
  status:
    plugin: default_value
    default_value: 1
  created: timestamp
  changed: timestamp
destination:
  plugin: 'entity:source_document'
migration_dependencies:
  required:
    - provinces
    - printers
    - regions
